<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Daten darstellen | Grundlagen der Datenanalyse mit R</title>
  <meta name="description" content="Kurze Einführung in den Umgang mit R" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="Daten darstellen | Grundlagen der Datenanalyse mit R" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="Kurze Einführung in den Umgang mit R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Daten darstellen | Grundlagen der Datenanalyse mit R" />
  
  <meta name="twitter:description" content="Kurze Einführung in den Umgang mit R" />
  

<meta name="author" content="Max Brede" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="daten-einlesen.html"/>
<link rel="next" href="appendix.html"/>
<script src="libs/header-attrs-2.5/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="/home/brede/MEGA/Honorar/111220_KfN/styles.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">R - KfN <br> 11.12.20</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Vorwort</a></li>
<li class="chapter" data-level="" data-path="rste-schritte.html"><a href="rste-schritte.html"><i class="fa fa-check"></i>Rste Schritte</a></li>
<li class="chapter" data-level="" data-path="daten-manipulieren.html"><a href="daten-manipulieren.html"><i class="fa fa-check"></i>Daten manipulieren</a></li>
<li class="chapter" data-level="" data-path="daten-einlesen.html"><a href="daten-einlesen.html"><i class="fa fa-check"></i>Daten einlesen</a></li>
<li class="chapter" data-level="" data-path="daten-darstellen.html"><a href="daten-darstellen.html"><i class="fa fa-check"></i>Daten darstellen</a></li>
<li class="chapter" data-level="" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i>Appendix</a></li>
<li class="chapter" data-level="" data-path="literatur-2.html"><a href="literatur-2.html"><i class="fa fa-check"></i>Literatur</a></li>
<li class="divider"></li>
<li><a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/"><img alt="Creative Commons Lizenzvertrag" style="border-width:0" src="https://i.creativecommons.org/l/by-sa/4.0/88x31.png" /></a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Grundlagen der Datenanalyse mit R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="daten-darstellen" class="section level1">
<h1>Daten darstellen</h1>
<div id="pivotieren-von-datensätzen" class="section level3">
<h3>pivotieren von Datensätzen</h3>
<p>
Als Vorbereitung auf die Darstellung von Daten brauchen wir noch eine Funktion.
</p>
<p>
Für das Grafikpaket, das wir benutzen wollen, müssen die Daten im <code>long format</code> vorliegen. Das heißt, dass jede Variable eine Spalte und jede Zeile eine Beobachtung darstellt.
</p>
<p>Insbesondere müssen wir darauf achten, dass alle Werte, die wir zum Beispiel an einer Achse darstellen wollen in einer Variable vorliegen. <br></p>
</div>
<div id="vorbereitung-zum-pivotieren" class="section level3">
<h3>Vorbereitung zum Pivotieren</h3>
<p>Als Beispiel wollen wir den <code>'crime'</code>-Datensatz pivotieren. Um das ganze übersichtlicher zu halten, bereiten wir den Datensatz aber noch ein bisschen vor.</p>
<p>Wir wollen dafür</p>
<ol style="list-style-type: decimal">
<li>Den Datensatz einlesen</li>
<li>Die Spalten <code>Force</code>, <code>HOMICIDE</code>, <code>Attempted murder</code>, <code>Violence with injury</code> und <code>Assault with injury</code> einlesen.</li>
<li>Die Mord-Spalte so umbenennen, dass der Name in das restliche Schema passt.</li>
<li>Die <code>Total</code>-Zeile ausschließen.</li>
</ol>
</div>
<div id="vorbereitung-zum-pivotieren-1" class="section level3">
<h3>Vorbereitung zum Pivotieren</h3>
<p class="q">
Wie machen wir das?
</p>
<div class="build">
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="daten-darstellen.html#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb113-2"><a href="daten-darstellen.html#cb113-2" aria-hidden="true" tabindex="-1"></a>crime <span class="ot">&lt;-</span> <span class="fu">read_delim</span>(<span class="st">&quot;data/crime_plot.csv&quot;</span>, </span>
<span id="cb113-3"><a href="daten-darstellen.html#cb113-3" aria-hidden="true" tabindex="-1"></a>                    <span class="st">&quot;;&quot;</span>, <span class="at">escape_double =</span> <span class="cn">FALSE</span>, <span class="at">trim_ws =</span> <span class="cn">TRUE</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-4"><a href="daten-darstellen.html#cb113-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Force,HOMICIDE,Country,<span class="st">`</span><span class="at">Attempted murder</span><span class="st">`</span>, </span>
<span id="cb113-5"><a href="daten-darstellen.html#cb113-5" aria-hidden="true" tabindex="-1"></a>         <span class="st">`</span><span class="at">Violence with injury</span><span class="st">`</span>, <span class="st">`</span><span class="at">Assault with injury</span><span class="st">`</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-6"><a href="daten-darstellen.html#cb113-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="st">&#39;Homicide&#39;</span> <span class="ot">=</span> <span class="st">&#39;HOMICIDE&#39;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb113-7"><a href="daten-darstellen.html#cb113-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Force <span class="sc">!=</span> <span class="st">&#39;Total&#39;</span>)</span>
<span id="cb113-8"><a href="daten-darstellen.html#cb113-8" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(crime)</span></code></pre></div>
<pre><code>## Rows: 44
## Columns: 6
## $ Force                  &lt;chr&gt; &quot;Avon and Somers…
## $ Homicide               &lt;dbl&gt; 10, 4, 1, 7, 3, …
## $ Country                &lt;chr&gt; &quot;England&quot;, &quot;Engl…
## $ `Attempted murder`     &lt;dbl&gt; 20, 10, 3, 13, 6…
## $ `Violence with injury` &lt;dbl&gt; 9293, 4368, 2200…
## $ `Assault with injury`  &lt;dbl&gt; 8716, 4171, 1905…</code></pre>
</div>
</div>
<div id="pivotieren-von-datensätzen-1" class="section level3">
<h3>pivotieren von Datensätzen</h3>
<p>Um den Datensatz in ein längeres Format zu pivotieren, benutzen wir die <code>pivot_longer</code>-Funktion.
Wir erstellen dafür hier einen zweiten Datensatz</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="daten-darstellen.html#cb115-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="ot">&lt;-</span> crime <span class="sc">%&gt;%</span> </span>
<span id="cb115-2"><a href="daten-darstellen.html#cb115-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb115-3"><a href="daten-darstellen.html#cb115-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">c</span>(<span class="st">&#39;Homicide&#39;</span>,<span class="st">&#39;Attempted murder&#39;</span>, </span>
<span id="cb115-4"><a href="daten-darstellen.html#cb115-4" aria-hidden="true" tabindex="-1"></a>             <span class="st">&#39;Violence with injury&#39;</span>, <span class="st">&#39;Assault with injury&#39;</span>),</span>
<span id="cb115-5"><a href="daten-darstellen.html#cb115-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="st">&#39;offence&#39;</span>, </span>
<span id="cb115-6"><a href="daten-darstellen.html#cb115-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_to =</span> <span class="st">&#39;count&#39;</span>)</span>
<span id="cb115-7"><a href="daten-darstellen.html#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(crime_long)</span></code></pre></div>
<pre><code>## Rows: 176
## Columns: 4
## $ Force   &lt;chr&gt; &quot;Avon and Somerset&quot;, &quot;Avon and …
## $ Country &lt;chr&gt; &quot;England&quot;, &quot;England&quot;, &quot;England&quot;…
## $ offence &lt;chr&gt; &quot;Homicide&quot;, &quot;Attempted murder&quot;,…
## $ count   &lt;dbl&gt; 10, 20, 9293, 8716, 4, 10, 4368…</code></pre>
</div>
<div id="vorbereitung-für-die-grafische-darstellung" class="section level3">
<h3>Vorbereitung für die grafische Darstellung</h3>
<p>Abschließend fügen wir noch für später Auswertungen eine Variable hinzu, die codiert, ob die Straftat in einer Verletzung ausgegangen ist oder versuchter/erfolgreicher Mord ist. Dafür benutzen wir die <code>str_detect</code>-Funktion.</p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="daten-darstellen.html#cb117-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="ot">&lt;-</span> crime_long <span class="sc">%&gt;%</span> </span>
<span id="cb117-2"><a href="daten-darstellen.html#cb117-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">type_of_offence =</span> <span class="fu">ifelse</span>(<span class="fu">str_detect</span>(offence, <span class="st">&#39;injury&#39;</span>),</span>
<span id="cb117-3"><a href="daten-darstellen.html#cb117-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&#39;injury&#39;</span>,</span>
<span id="cb117-4"><a href="daten-darstellen.html#cb117-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="st">&#39;(attempted) homicide&#39;</span>))</span>
<span id="cb117-5"><a href="daten-darstellen.html#cb117-5" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(crime)</span></code></pre></div>
<pre><code>## Rows: 44
## Columns: 6
## $ Force                  &lt;chr&gt; &quot;Avon and Somers…
## $ Homicide               &lt;dbl&gt; 10, 4, 1, 7, 3, …
## $ Country                &lt;chr&gt; &quot;England&quot;, &quot;Engl…
## $ `Attempted murder`     &lt;dbl&gt; 20, 10, 3, 13, 6…
## $ `Violence with injury` &lt;dbl&gt; 9293, 4368, 2200…
## $ `Assault with injury`  &lt;dbl&gt; 8716, 4171, 1905…</code></pre>
</div>
<div id="ggplot2" class="section level3">
<h3>ggplot2</h3>
<p>
Eins der stärksten Argumente für die Benutzung von R und dem <code>tidyverse</code> ist das Grafik-Paket <code>ggplot2</code>.
</p>
<div class="build">
<p>
Mit ein bisschen Gewöhnung macht <code>ggplot2</code> es sehr einfach, hübsche Grafiken zu erstellen.
</p>
<p>Die Syntax für <code>ggplot2</code> ist dabei aber ein bisschen anders als die, die wir bisher von R gewohnt sind.</p>
<p>
Dafür müssen wir zuerst eine Grundebene erstellen, auf die wir die Grafik anschließend layern können.
</p>
<p>
Diese Grundebene kann man sich ein bisschen wie eine leere Leinwand vorstellen.
Dabei wird beim Erstellen der ‘Leinwand’ direkt festgelegt, auf welchen Daten die Abbildung basieren soll und welche Variablen wie dargestellt werden sollen.
</p>
</div>
</div>
<div id="ggplot2-1" class="section level3">
<h3>ggplot2</h3>
<p>
Diese Leinwand erstellt man mit der <code>ggplot</code>-Funktion, in die man, wie in die meisten <code>tidyverse</code>-Funktionen, pipen kann.
</p>
<p>
Als zweites Argument nach dem Datensatz erwartet <code>ggplot</code> eine Angabe, wie welche Variablen dargestellt werden sollen. Diese Angaben <em>müssen</em> mit <code>aes</code> für aesthetics erstellt werden:
</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="daten-darstellen.html#cb119-1" aria-hidden="true" tabindex="-1"></a>crime_plot <span class="ot">&lt;-</span> crime <span class="sc">%&gt;%</span> </span>
<span id="cb119-2"><a href="daten-darstellen.html#cb119-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Homicide, <span class="at">y =</span> <span class="st">`</span><span class="at">Attempted murder</span><span class="st">`</span>))</span></code></pre></div>
</div>
<div id="ggplot2-2" class="section level3 scrollable">
<h3>ggplot2</h3>
<p>Diese ‘leere Leinwand’ sieht so aus:</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="daten-darstellen.html#cb120-1" aria-hidden="true" tabindex="-1"></a>crime_plot</span></code></pre></div>
<p><img src="R---KfN-11.12.20_files/figure-html/unnamed-chunk-94-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="aesthetics" class="section level3 subsection">
<h3>aesthetics</h3>
<p>Auf diese Leinwand können wir dann eine Reihe von verschiedenen grafischen Elementen legen, den so genannten <code>geom</code>s. Das einfachste Beispiel auf der eben erstellten Leinwand ist ein Scatterplot.
Um der Leinwand Punkte hinzuzufügen, <em>addieren</em> wir einfach einen <code>geom_point</code>-Layer auf die Grafik:</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="daten-darstellen.html#cb121-1" aria-hidden="true" tabindex="-1"></a>crime_plot <span class="sc">+</span> <span class="fu">geom_point</span>()</span></code></pre></div>
<p><img src="imgs/pts.png" width="864" style="display: block; margin: auto;" /></p>
</div>
<div id="aesthetics-1" class="section level3">
<h3>aesthetics</h3>
<p>
Dieser sehr einfache Graph ist aber natürlich nicht alles. Die <code>aes</code>- und die <code>ggplot</code>-Funktionen können noch eine ganze Reihe an weiteren grafischen Parametern annehmen.
</p>
<p>
Die für unseren Graphen attraktivsten sind:
</p>
<ul>
<li><code>size</code> - für die Punktgröße</li>
<li><code>color</code> - für die Farbe der Punkte</li>
<li><code>shape</code> - für die Wahl der Symbole</li>
</ul>
</div>
<div id="aesthetics-2" class="section level3">
<h3>aesthetics</h3>
<p>Jedes <code>geom</code> hat auch die Möglichkeit, Daten und <code>aesthetics</code> zu nehmen. Wenn keine gesetzt werden, werden einfach die des ursprünglichen <code>ggplot</code>-Aufrufs übernommen.</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="daten-darstellen.html#cb122-1" aria-hidden="true" tabindex="-1"></a>crime_plot <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> <span class="st">`</span><span class="at">Violence with injury</span><span class="st">`</span>, </span>
<span id="cb122-2"><a href="daten-darstellen.html#cb122-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> <span class="st">`</span><span class="at">Assault with injury</span><span class="st">`</span>))</span></code></pre></div>
<p><img src="imgs/pts2.png" width="864" style="display: block; margin: auto;" /></p>
<p class="o">
Die aus mehreren Worten bestehenden Variablennamen sind mit Gravis eingeschlossen, nicht mit Anführungszeichen!
</p>
</div>
<div id="aesthetics-3" class="section level3">
<h3>aesthetics</h3>
<p>Wenn <code>aesthetic</code>-Argumente außerhalb der <code>aes</code>-Funktion gesetzt werden, geben sie einen konstanten Wert für das <code>geom</code> an:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="daten-darstellen.html#cb123-1" aria-hidden="true" tabindex="-1"></a>crime_plot <span class="sc">+</span> <span class="fu">geom_point</span>(<span class="fu">aes</span>(<span class="at">size =</span> <span class="st">`</span><span class="at">Violence with injury</span><span class="st">`</span>), </span>
<span id="cb123-2"><a href="daten-darstellen.html#cb123-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">color =</span> <span class="st">&#39;purple&#39;</span>)</span></code></pre></div>
<p><img src="imgs/pts3.png" width="864" style="display: block; margin: auto;" /></p>
</div>
<div id="geoms" class="section level3 subsection">
<h3>geoms</h3>
<p>
Um andere Grafiken zu erstellen, ersetzt man einfach das <code>geom_point</code>-geom durch ein anderes.
</p>
<p>
Dabei kann es natürlich nötig sein, eine andere Leinwand zu definieren.
</p>
</div>
<div id="geoms-1" class="section level3 scrollable">
<h3>geoms</h3>
<p>
Histogramme, Boxplots und Barcharts:<a href="#fn3" class="footnote-ref" id="fnref3"><sup>3</sup></a>
</p>
<div class="cols">
<div class="col">
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="daten-darstellen.html#cb124-1" aria-hidden="true" tabindex="-1"></a>crime <span class="sc">%&gt;%</span> </span>
<span id="cb124-2"><a href="daten-darstellen.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> Homicide)) <span class="sc">+</span></span>
<span id="cb124-3"><a href="daten-darstellen.html#cb124-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb124-4"><a href="daten-darstellen.html#cb124-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">color =</span> <span class="st">&#39;black&#39;</span>,</span>
<span id="cb124-5"><a href="daten-darstellen.html#cb124-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">binwidth =</span> <span class="dv">3</span>)</span></code></pre></div>
</div>
<div class="col">
<p><img src="imgs/pts4.png" width="432" style="display: block; margin: auto;" /></p>
</div>
</div>
<div class="cols">
<div class="col">
<div class="sourceCode" id="cb125"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb125-1"><a href="daten-darstellen.html#cb125-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span> </span>
<span id="cb125-2"><a href="daten-darstellen.html#cb125-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count, </span>
<span id="cb125-3"><a href="daten-darstellen.html#cb125-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> offence)) <span class="sc">+</span></span>
<span id="cb125-4"><a href="daten-darstellen.html#cb125-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>()</span></code></pre></div>
</div>
<div class="col">
<p><img src="imgs/pts5.png" width="432" style="display: block; margin: auto;" /></p>
</div>
</div>
<div class="cols">
<div class="col">
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="daten-darstellen.html#cb126-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="daten-darstellen.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count,</span>
<span id="cb126-3"><a href="daten-darstellen.html#cb126-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> offence</span>
<span id="cb126-4"><a href="daten-darstellen.html#cb126-4" aria-hidden="true" tabindex="-1"></a>             )) <span class="sc">+</span></span>
<span id="cb126-5"><a href="daten-darstellen.html#cb126-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>()</span></code></pre></div>
</div>
<div class="col">
<p><img src="imgs/pts6.png" width="432" style="display: block; margin: auto;" /></p>
</div>
</div>
</div>
<div id="aesthetics-4" class="section level3 subsection">
<h3>aesthetics</h3>
<p>
Der Barchart ist ein guter Anlass, den Plot zu optimieren.
</p>
<p>
Uns stehen die folgenden Informationen zur Verfügung:
</p>
<div class="sourceCode" id="cb127"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb127-1"><a href="daten-darstellen.html#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(crime_long)</span></code></pre></div>
<pre><code>## Rows: 176
## Columns: 5
## $ Force           &lt;chr&gt; &quot;Avon and Somerset&quot;, &quot;A…
## $ Country         &lt;chr&gt; &quot;England&quot;, &quot;England&quot;, &quot;…
## $ offence         &lt;chr&gt; &quot;Homicide&quot;, &quot;Attempted …
## $ count           &lt;dbl&gt; 10, 20, 9293, 8716, 4, …
## $ type_of_offence &lt;chr&gt; &quot;(attempted) homicide&quot;,…</code></pre>
<p>Um ein bisschen mehr Spielraum zu haben, gibt es in <code>ggplot</code> <code>facets</code>.</p>
</div>
<div id="facets" class="section level3">
<h3>facets!</h3>
<p>Facets lassen uns einfach mehrere Subplots definieren, um zusätzlich zu den in unseren <code>geom</code>s und <code>aes</code>-Aufrufen definierten Aspekten Subgruppen darzustellen.</p>
<div class="sourceCode" id="cb129"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb129-1"><a href="daten-darstellen.html#cb129-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span>  </span>
<span id="cb129-2"><a href="daten-darstellen.html#cb129-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count,</span>
<span id="cb129-3"><a href="daten-darstellen.html#cb129-3" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> Force)) <span class="sc">+</span></span>
<span id="cb129-4"><a href="daten-darstellen.html#cb129-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb129-5"><a href="daten-darstellen.html#cb129-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb129-6"><a href="daten-darstellen.html#cb129-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(offence<span class="sc">~</span>Country, <span class="do">## als facets mit Straftat in Zeilen und Landesteil in Spalten</span></span>
<span id="cb129-7"><a href="daten-darstellen.html#cb129-7" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&#39;free&#39;</span>) <span class="do">## mit individuellen Skalen</span></span></code></pre></div>
<p><img src="R---KfN-11.12.20_files/figure-html/unnamed-chunk-107-1.png" width="672" style="display: block; margin: auto;" /></p>
<p class="q">
Wie können wir das noch verbessern?
</p>
</div>
<div id="additional-tweeks" class="section level3">
<h3>additional tweeks</h3>
<p>Zuerst sortieren wir die Polizeistationen in absteigender Reihenfolge der jeweiligen mittleren Fallzahlen.</p>
<p>Dafür benutzen wir das <code>forcats</code>-Paket aus dem <code>tidyverse</code>. Ein Paket, dass Funktionen zum Verändern und Sortieren von Faktoren bietet.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="daten-darstellen.html#cb130-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span> </span>
<span id="cb130-2"><a href="daten-darstellen.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb130-3"><a href="daten-darstellen.html#cb130-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">as_factor</span>(Force), <span class="do">## zuerst in Faktor umwandeln</span></span>
<span id="cb130-4"><a href="daten-darstellen.html#cb130-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">fct_reorder</span>(Force, count,<span class="at">.fun =</span> mean, <span class="at">.desc =</span> T)) <span class="sc">%&gt;%</span> <span class="do">## dann absteigend sortieren</span></span>
<span id="cb130-5"><a href="daten-darstellen.html#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count,</span>
<span id="cb130-6"><a href="daten-darstellen.html#cb130-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> Force)) <span class="sc">+</span></span>
<span id="cb130-7"><a href="daten-darstellen.html#cb130-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb130-8"><a href="daten-darstellen.html#cb130-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb130-9"><a href="daten-darstellen.html#cb130-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(offence<span class="sc">~</span>Country, </span>
<span id="cb130-10"><a href="daten-darstellen.html#cb130-10" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&#39;free&#39;</span>)</span></code></pre></div>
<p><img src="R---KfN-11.12.20_files/figure-html/unnamed-chunk-108-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="additional-tweeks-1" class="section level3">
<h3>additional tweeks</h3>
<p>Um die einzelnen Stationen besser lesbar zu machen, können wir noch die Achsen austauschen.</p>
<div class="sourceCode" id="cb131"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb131-1"><a href="daten-darstellen.html#cb131-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span> </span>
<span id="cb131-2"><a href="daten-darstellen.html#cb131-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb131-3"><a href="daten-darstellen.html#cb131-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">as_factor</span>(Force), <span class="do">## zuerst in Faktor umwandeln</span></span>
<span id="cb131-4"><a href="daten-darstellen.html#cb131-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">fct_reorder</span>(Force, count,<span class="at">.fun =</span> mean, <span class="at">.desc =</span> T)) <span class="sc">%&gt;%</span> <span class="do">## dann absteigend sortieren</span></span>
<span id="cb131-5"><a href="daten-darstellen.html#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count,</span>
<span id="cb131-6"><a href="daten-darstellen.html#cb131-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> Force)) <span class="sc">+</span></span>
<span id="cb131-7"><a href="daten-darstellen.html#cb131-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb131-8"><a href="daten-darstellen.html#cb131-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb131-9"><a href="daten-darstellen.html#cb131-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb131-10"><a href="daten-darstellen.html#cb131-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Country <span class="sc">~</span> offence, </span>
<span id="cb131-11"><a href="daten-darstellen.html#cb131-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&#39;free&#39;</span>)</span></code></pre></div>
<p><img src="R---KfN-11.12.20_files/figure-html/unnamed-chunk-109-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="themes" class="section level3 subsection">
<h3>themes</h3>
<p>Und zuletzt die Achsenbeschriftungen anpassen und die x-Achsen-Beschriftung rotieren.</p>
<ul>
<li><p>Die Achsenbeschriftungen und Überschriften lassen sich mit der <code>labs</code>-Funktion festlegen</p></li>
<li><p>Die Ausrichtung der Beschriftung (wie die meisten grafischen Aspekte) lassen sich mit der <code>theme</code>-Funktion fine-tunen</p></li>
</ul>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="daten-darstellen.html#cb132-1" aria-hidden="true" tabindex="-1"></a>crime_long <span class="sc">%&gt;%</span> </span>
<span id="cb132-2"><a href="daten-darstellen.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb132-3"><a href="daten-darstellen.html#cb132-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">as_factor</span>(Force), <span class="do">## zuerst in Faktor umwandeln</span></span>
<span id="cb132-4"><a href="daten-darstellen.html#cb132-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">Force =</span> <span class="fu">fct_reorder</span>(Force, count,<span class="at">.fun =</span> mean, <span class="at">.desc =</span> T)) <span class="sc">%&gt;%</span> <span class="do">## dann absteigend sortieren</span></span>
<span id="cb132-5"><a href="daten-darstellen.html#cb132-5" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> count,</span>
<span id="cb132-6"><a href="daten-darstellen.html#cb132-6" aria-hidden="true" tabindex="-1"></a>             <span class="at">x =</span> Force)) <span class="sc">+</span></span>
<span id="cb132-7"><a href="daten-darstellen.html#cb132-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> <span class="st">&#39;white&#39;</span>,</span>
<span id="cb132-8"><a href="daten-darstellen.html#cb132-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">color =</span> <span class="st">&#39;grey&#39;</span>) <span class="sc">+</span></span>
<span id="cb132-9"><a href="daten-darstellen.html#cb132-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb132-10"><a href="daten-darstellen.html#cb132-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_grid</span>(Country <span class="sc">~</span> offence, </span>
<span id="cb132-11"><a href="daten-darstellen.html#cb132-11" aria-hidden="true" tabindex="-1"></a>             <span class="at">scales =</span> <span class="st">&#39;free&#39;</span>) <span class="sc">+</span></span>
<span id="cb132-12"><a href="daten-darstellen.html#cb132-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">&#39;Anzahl&#39;</span>,</span>
<span id="cb132-13"><a href="daten-darstellen.html#cb132-13" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">&#39;Polizeistation&#39;</span>,</span>
<span id="cb132-14"><a href="daten-darstellen.html#cb132-14" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">&#39;Gemeldete Straftaten pro englischer Polizeistation&#39;</span>) <span class="sc">+</span></span>
<span id="cb132-15"><a href="daten-darstellen.html#cb132-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>,</span>
<span id="cb132-16"><a href="daten-darstellen.html#cb132-16" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">hjust =</span> <span class="dv">1</span>))</span></code></pre></div>
<p><img src="R---KfN-11.12.20_files/figure-html/unnamed-chunk-110-1.png" width="672" style="display: block; margin: auto;" /></p>
</div>
<div id="grafiken-exportieren" class="section level3 subsection">
<h3>Grafiken exportieren</h3>
<p>Um die Auflösung zu verbessern können wir jetzt noch die Grafik mit anderen Seitenverhältnissen exportieren. Die <code>ggsave</code>-Funktion lässt uns einfach Grafiken in beliebigen Formaten exportieren.</p>
<div class="sourceCode" id="cb133"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb133-1"><a href="daten-darstellen.html#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsave</span>(<span class="at">filename =</span> <span class="st">&#39;imgs/police_stations.png&#39;</span>,</span>
<span id="cb133-2"><a href="daten-darstellen.html#cb133-2" aria-hidden="true" tabindex="-1"></a>      <span class="at">width =</span> <span class="dv">50</span>,</span>
<span id="cb133-3"><a href="daten-darstellen.html#cb133-3" aria-hidden="true" tabindex="-1"></a>      <span class="at">height =</span> <span class="dv">100</span>,</span>
<span id="cb133-4"><a href="daten-darstellen.html#cb133-4" aria-hidden="true" tabindex="-1"></a>      <span class="at">units =</span> <span class="st">&#39;cm&#39;</span>)</span></code></pre></div>
<p><img src="imgs/police_stations.png" width="600px" style="display: block; margin: auto;" /></p>

<!-- # --- -->
<!-- # title: "Anhang" -->
<!-- # author: "Max Brede" -->
<!-- # date: "11/12/2020" -->
<!-- # output: -->
<!-- #   ioslides_presentation: -->
<!-- #     transition: faster -->
<!-- #     css: /home/brede/MEGA/Honorar/111220_KfN/styles.css -->
<!-- #     slide_level: 3 -->
<!-- # widescreen: true -->
<!-- # bibliography: /home/brede/MEGA/Honorar/111220_KfN/references.bib -->
<!-- # csl: /home/brede/MEGA/Honorar/111220_KfN/apa.csl -->
<!-- # smaller: true  -->
<!-- # --- -->
<!-- ```{r,results='asis', echo = F} -->
<!-- read_file('/home/brede/MEGA/Honorar/111220_KfN/ioTOC.html') %>% cat -->
<!-- read_file('/home/brede/MEGA/Honorar/111220_KfN/scrollableSlides.html') %>% cat -->
<!-- ``` -->
<!-- ### Ablauf -->
<!-- <div id="toc"></div> -->
</div>
</div>
<div class="footnotes">
<hr />
<ol start="3">
<li id="fn3"><p>Für über eine Übersicht über mehr mögliche geoms lässt sich das <a href="https://raw.githubusercontent.com/rstudio/cheatsheets/master/data-visualization-2.1.pdf">ggplot2-cheatsheet</a> empfehlen.<a href="daten-darstellen.html#fnref3" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="daten-einlesen.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="appendix.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["R - KfN 11.12.20.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
